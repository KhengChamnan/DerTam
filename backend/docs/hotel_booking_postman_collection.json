{
	"info": {
		"_postman_id": "hotel-booking-api-2025",
		"name": "Hotel Booking API Collection",
		"description": "Complete API collection for hotel property management and booking system",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Authentication",
			"item": [
				{
					"name": "Register User",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"John Doe\",\n    \"email\": \"john@example.com\",\n    \"password\": \"password123\",\n    \"password_confirmation\": \"password123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/register",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"register"
							]
						}
					},
					"response": []
				},
				{
					"name": "Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"if (jsonData.data && jsonData.data.token) {",
									"    pm.environment.set(\"auth_token\", jsonData.data.token);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"john@example.com\",\n    \"password\": \"password123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"login"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Hotel Properties",
			"item": [
				{
					"name": "Get All Properties (Public)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/hotels/properties",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"hotels",
								"properties"
							]
						},
						"description": "Get all hotel properties without authentication"
					},
					"response": []
				},
				{
					"name": "Get Properties with Filters",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/hotels/properties?province_category_id=1&max_guests=2&min_price=50&max_price=200&rating=4.0&per_page=10",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"hotels",
								"properties"
							],
							"query": [
								{
									"key": "province_category_id",
									"value": "1",
									"description": "Filter by province"
								},
								{
									"key": "max_guests",
									"value": "2",
									"description": "Minimum max_guests in rooms"
								},
								{
									"key": "min_price",
									"value": "50",
									"description": "Minimum price per night"
								},
								{
									"key": "max_price",
									"value": "200",
									"description": "Maximum price per night"
								},
								{
									"key": "rating",
									"value": "4.0",
									"description": "Minimum rating"
								},
								{
									"key": "per_page",
									"value": "10",
									"description": "Items per page"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Single Property (Public)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/hotels/properties/1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"hotels",
								"properties",
								"1"
							]
						}
					},
					"response": []
				},
				{
					"name": "Create Property (Auth)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "name",
									"value": "Grand Hotel",
									"type": "text"
								},
								{
									"key": "google_map_link",
									"value": "https://maps.google.com/example",
									"type": "text"
								},
								{
									"key": "latitude",
									"value": "11.5564",
									"type": "text"
								},
								{
									"key": "longitude",
									"value": "104.9282",
									"type": "text"
								},
								{
									"key": "owner_user_id",
									"value": "1",
									"type": "text"
								},
								{
									"key": "province_category_id",
									"value": "1",
									"type": "text"
								},
								{
									"key": "description",
									"value": "A beautiful 5-star hotel in the heart of the city",
									"type": "text"
								},
								{
									"key": "rating",
									"value": "4.5",
									"type": "text"
								},
								{
									"key": "reviews_count",
									"value": "150",
									"type": "text"
								},
								{
									"key": "images[]",
									"type": "file",
									"src": []
								}
							]
						},
						"url": {
							"raw": "{{base_url}}/api/hotels/properties",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"hotels",
								"properties"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete Property (Auth)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/hotels/properties/1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"hotels",
								"properties",
								"1"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Facilities",
			"item": [
				{
					"name": "Create Facility (Auth)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"property_id\": 1,\n    \"facility_name\": \"Swimming Pool\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/hotels/facilities",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"hotels",
								"facilities"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Room Properties",
			"item": [
				{
					"name": "Create Room Property (Auth)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "property_id",
									"value": "1",
									"type": "text"
								},
								{
									"key": "room_type",
									"value": "Deluxe Room",
									"type": "text"
								},
								{
									"key": "room_description",
									"value": "Spacious room with city view",
									"type": "text"
								},
								{
									"key": "max_guests",
									"value": "2",
									"type": "text"
								},
								{
									"key": "room_size",
									"value": "30 sqm",
									"type": "text"
								},
								{
									"key": "price_per_night",
									"value": "100",
									"type": "text"
								},
								{
									"key": "is_available",
									"value": "1",
									"type": "text"
								},
								{
									"key": "images[]",
									"type": "file",
									"src": []
								}
							]
						},
						"url": {
							"raw": "{{base_url}}/api/hotels/room-properties",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"hotels",
								"room-properties"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Amenities",
			"item": [
				{
					"name": "Create Amenity (Auth)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"room_properties_id\": 1,\n    \"amenity_name\": \"WiFi\",\n    \"is_available\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/hotels/amenities",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"hotels",
								"amenities"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete Amenity (Auth)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/hotels/amenities/1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"hotels",
								"amenities",
								"1"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Bookings",
			"item": [
				{
					"name": "Create Booking (Auth)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"if (jsonData.data && jsonData.data.booking_id) {",
									"    pm.environment.set(\"booking_id\", jsonData.data.booking_id);",
									"    pm.environment.set(\"merchant_ref_no\", jsonData.data.merchant_ref_no);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"full_name\": \"John Doe\",\n    \"age\": 30,\n    \"gender\": \"Male\",\n    \"mobile\": \"+855123456789\",\n    \"email\": \"john@example.com\",\n    \"id_number\": \"ABC123456\",\n    \"check_in\": \"2025-11-01\",\n    \"check_out\": \"2025-11-05\",\n    \"room_ids\": [1, 2],\n    \"payment_method\": \"KHQR\",\n    \"trip_id\": null\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/hotels/bookings",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"hotels",
								"bookings"
							]
						},
						"description": "Create a new hotel booking with guest details and room selection"
					},
					"response": []
				},
				{
					"name": "Get All Bookings (Auth)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/hotels/bookings",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"hotels",
								"bookings"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Bookings with Filters (Auth)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/hotels/bookings?status=pending&payment_status=pending&per_page=20",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"hotels",
								"bookings"
							],
							"query": [
								{
									"key": "status",
									"value": "pending",
									"description": "pending, paid, cancelled"
								},
								{
									"key": "payment_status",
									"value": "pending",
									"description": "success, failed, pending"
								},
								{
									"key": "trip_id",
									"value": "1",
									"description": "Filter by trip ID",
									"disabled": true
								},
								{
									"key": "email",
									"value": "john@example.com",
									"description": "Filter by email",
									"disabled": true
								},
								{
									"key": "merchant_ref_no",
									"value": "BK202510231430001234",
									"description": "Filter by merchant reference",
									"disabled": true
								},
								{
									"key": "per_page",
									"value": "20"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Single Booking (Public)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/hotels/bookings/{{booking_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"hotels",
								"bookings",
								"{{booking_id}}"
							]
						},
						"description": "Get detailed booking information by booking ID (no auth required)"
					},
					"response": []
				},
				{
					"name": "Update Booking Status (Auth)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"status\": \"paid\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/hotels/bookings/{{booking_id}}/status",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"hotels",
								"bookings",
								"{{booking_id}}",
								"status"
							]
						},
						"description": "Update booking status: pending, paid, cancelled"
					},
					"response": []
				},
				{
					"name": "Update Payment Status (Auth)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"payment_status\": \"success\",\n    \"tran_id\": \"TXN20251023143000\",\n    \"payment_date\": \"2025-10-23 14:30:00\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/hotels/bookings/{{booking_id}}/payment",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"hotels",
								"bookings",
								"{{booking_id}}",
								"payment"
							]
						},
						"description": "Update payment status. If payment_status is 'success', booking status will automatically change to 'paid'"
					},
					"response": []
				},
				{
					"name": "Cancel Booking (Auth)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/hotels/bookings/{{booking_id}}/cancel",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"hotels",
								"bookings",
								"{{booking_id}}",
								"cancel"
							]
						},
						"description": "Cancel a booking (sets status to 'cancelled')"
					},
					"response": []
				},
				{
					"name": "Delete Booking (Auth - Admin)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{auth_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/hotels/bookings/{{booking_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"hotels",
								"bookings",
								"{{booking_id}}"
							]
						},
						"description": "Permanently delete a booking from the database"
					},
					"response": []
				}
			]
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://127.0.0.1:8000",
			"type": "string"
		},
		{
			"key": "auth_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "booking_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "merchant_ref_no",
			"value": "",
			"type": "string"
		}
	]
}
